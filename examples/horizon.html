<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>HORIZON HUD</title>
  <meta name="description" content="Demo of Horizon HUD using Web Components">
  <link rel="stylesheet" type="text/css" href="style/horizon.css" />
  <link rel="stylesheet" href="js/lib/codemirror/codemirror.css">
  <link rel="stylesheet" href="js/lib/codemirror/theme/monokai.css">
</head>

<!-- HUD -->
<!-- <div id="hud" class="hud threed">

  <div id="background" class="background threed"></div>

  <div id="title" class="title threed">
    <span id="title__icon" class="title__icon"></span>
    <span id="title__text" class="title__text"></span>
  </div>

  <div id="directory" class="directory threed"></div>

  <form id="urlbar" class="urlbar threed" action="#">
    <input class="urlbar__input" type="text">
  </form>

  <div id="backfwd" class="backfwd threed">
    <span class="fa fa-arrow-left nav backfwd__back" data-action="back" id="backfwd__back"></span>
    <span class="fa fa-arrow-right nav backfwd__forward" data-action="forward" id="backfwd__forward"></span>
  </div>

  <div id="stopreload" class="stopreload threed">
    <span class="fa fa-repeat nav stopreload--reload" data-action="reload" id="stopreload--reload"></span>
    <span class="fa fa-times nav stopreload--stop" data-action="stop" id="stopreload--stop"></span>
  </div>

  <div id="closehud" class="closehud threed">Close HUD</div>
  <div id="resetsensor" class="resetsensor threed">Reset Sensor</div>

  <div id="loading" class="loading threed">LOADING</div>

</div> -->

<body>
  <vr-scene class="scene">
    <vr-camera class="camera">
      <vr-object class="pivot">
        <vr-object class="hud" style="--z: 1000">
          <vr-hud class="hud" style="width: 800px; height: 500px;"></vr-hud>
          <vr-object class="hud-element hud-button" style="--x: -440"></vr-object>
        </vr-object>
      </vr-object>
    </vr-camera>
  </vr-scene>
  <button class="vr-button">Enter VR</button>
  <button class="source-button view-source">View Source</button>
  <script src="js/type.js"></script>
  <script src="js/ajax.js"></script>
  <script src="js/lib/codemirror/codemirror.js"></script>
  <script src="js/lib/codemirror/addon/searchcursor.js"></script>
  <script src="js/lib/codemirror/mode/javascript.js"></script>
  <script src="js/lib/codemirror/mode/xml/xml.js"></script>
  <script src="js/lib/codemirror/mode/htmlmixed/htmlmixed.js"></script>
  <script src="js/lib/codemirror/formatting.js"></script>

  <script src="../lib/vendor/dat.gui.js"></script>
  <script src="../lib/vendor/three.js"></script>
  <script src="../lib/vendor/VRControls.js"></script>
  <script src="../lib/vendor/VREffect.js"></script>
  <script src="../lib/vendor/keyboard.js"></script>
  <script src="../src/vr-editor.js"></script>
  <script src="../build/vr-components.js"></script>
  <script>
    var vrDevices = {};
    var container = document.querySelector('vr-scene');
    var hud = document.querySelector('.hud');
    var webview = document.querySelector('.webview');

    function start() {
      var fsButtons = document.querySelectorAll('.vr-button');
      var i;
      for(i=0; i<fsButtons.length; ++i) {
        fsButtons[i].addEventListener('click', function() {
          VREditor.closeSource();
          container.mozRequestFullScreen({ vrDisplay: vrDevices.headset });
        });
      }
      var viewSource = document.querySelector('.view-source');
      viewSource.addEventListener('click', VREditor.openSource);
      window.addEventListener('resize', function(e) {
        console.log('window Height = container Height', window.innerHeight == container.offsetHeight)
      })
      hud.addEventListener('click', function(evt) {
        if (evt.detail.url) {
          //webview.loadURL(evt.detail.url);
          //webview.show();
          hud.hide();
          hudOpen = false;
        }
      });
    }

    navigator.getVRDevices().then(function(devices) {
      vrDevices.headset = devices[0];
      vrDevices.position = devices[1];
      start();
    });

    var hudOpen = false;
    hud.hide();
    //webview.show();
    //webview.loadURL('http://mozvr.com/posts/quick-vr-prototypes/');

    KeyboardJS.on('space', function() {
      if (hudOpen) {
        hud.hide();
        //webview.show();
      } else {
        hud.show();
        //webview.hide();
      }
      hudOpen = !hudOpen;
    });
  </script>
</body>
</html>
